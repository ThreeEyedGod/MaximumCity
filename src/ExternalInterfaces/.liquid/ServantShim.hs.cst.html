<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>src/ExternalInterfaces/ServantShim.hs</title>
</head>
<head>
<link type='text/css' rel='stylesheet' href='liquid.css' />
</head>

<body>
<hr>
Put mouse over identifiers to see inferred types
<pre><span class=hs-linenum>  1: </span><a class=annot href="#"><span class=annottext>{VV##1485 : GHC.Types.Module | $k_##1486}</span><span class='hs-comment'>{-# LANGUAGE OverloadedStrings #-}</span></a>
<span class=hs-linenum>  2: </span><span class='hs-comment'>{-# LANGUAGE RankNTypes        #-}</span>
<span class=hs-linenum>  3: </span>
<span class=hs-linenum>  4: </span><span class='hs-keyword'>module</span> <span class='hs-conid'>ExternalInterfaces.ServantShim</span>
<span class=hs-linenum>  5: </span>  <span class='hs-layout'>(</span> <span class='hs-varid'>makeHandler</span>
<span class=hs-linenum>  6: </span>  <span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<span class=hs-linenum>  7: </span>
<span class=hs-linenum>  8: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Protolude</span>
<span class=hs-linenum>  9: </span>
<span class=hs-linenum> 10: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>AWSLambda.Events.APIGateway</span>
<span class=hs-linenum> 11: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Data.Aeson</span>                  <span class='hs-layout'>(</span><span class='hs-conid'>Value</span><span class='hs-layout'>,</span> <span class='hs-varid'>decode</span><span class='hs-layout'>,</span> <span class='hs-varid'>encode</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 12: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Data.Aeson.Embedded</span>         <span class='hs-layout'>(</span><span class='hs-conid'>Embedded</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 13: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Data.ByteString.Builder</span>     <span class='hs-layout'>(</span><span class='hs-varid'>toLazyByteString</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 14: </span><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data.ByteString.Char8</span>       <span class='hs-keyword'>as</span> <span class='hs-conid'>B</span>
<span class=hs-linenum> 15: </span><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data.ByteString.Lazy</span>        <span class='hs-keyword'>as</span> <span class='hs-conid'>BL</span>
<span class=hs-linenum> 16: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Data.IORef</span>                  <span class='hs-layout'>(</span><span class='hs-conid'>IORef</span><span class='hs-layout'>,</span> <span class='hs-varid'>newIORef</span><span class='hs-layout'>,</span> <span class='hs-varid'>readIORef</span><span class='hs-layout'>,</span>
<span class=hs-linenum> 17: </span>                                              <span class='hs-varid'>writeIORef</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 18: </span><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data.Text</span>                   <span class='hs-keyword'>as</span> <span class='hs-conid'>T</span>
<span class=hs-linenum> 19: </span><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data.Text.Encoding</span>          <span class='hs-keyword'>as</span> <span class='hs-conid'>T</span>
<span class=hs-linenum> 20: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>GHC.IO.Exception</span>            <span class='hs-layout'>(</span><span class='hs-conid'>IOError</span><span class='hs-layout'>,</span> <span class='hs-conid'>IOErrorType</span> <span class='hs-layout'>(</span><span class='hs-conid'>OtherError</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<span class=hs-linenum> 21: </span>                                              <span class='hs-conid'>IOException</span> <span class='hs-layout'>(</span><span class='hs-conid'>IOError</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 22: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Control.Lens</span>                <span class='hs-layout'>(</span><span class='hs-layout'>(</span><span class='hs-varop'>%~</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-layout'>(</span><span class='hs-varop'>?~</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-layout'>(</span><span class='hs-varop'>^.</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 23: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Network.HTTP.Types</span>          <span class='hs-varid'>hiding</span> <span class='hs-layout'>(</span><span class='hs-conid'>Header</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 24: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Network.Wai</span>                 <span class='hs-layout'>(</span><span class='hs-conid'>Application</span><span class='hs-layout'>,</span>
<span class=hs-linenum> 25: </span>                                              <span class='hs-conid'>RequestBodyLength</span> <span class='hs-layout'>(</span><span class='hs-conid'>ChunkedBody</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<span class=hs-linenum> 26: </span>                                              <span class='hs-varid'>defaultRequest</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 27: </span><span class='hs-keyword'>import</span>           <span class='hs-conid'>Network.Wai.Internal</span>        <span class='hs-layout'>(</span><span class='hs-conid'>Request</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-conid'>Response</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<span class=hs-linenum> 28: </span>                                              <span class='hs-conid'>ResponseReceived</span> <span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 29: </span>
<span class=hs-linenum> 30: </span>
<span class=hs-linenum> 31: </span><span class='hs-keyword'>type</span> <span class='hs-conid'>APIGatewayHandler</span>
<span class=hs-linenum> 32: </span>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>APIGatewayProxyRequest</span> <span class='hs-layout'>(</span><span class='hs-conid'>Embedded</span> <span class='hs-conid'>Value</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-layout'>(</span><span class='hs-conid'>APIGatewayProxyResponse</span> <span class='hs-layout'>(</span><span class='hs-conid'>Embedded</span> <span class='hs-conid'>Value</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 33: </span>
<span class=hs-linenum> 34: </span><span class='hs-comment'>-- | Constructs a APIGatewayHandler for a request to this AWS Lambda function.</span>
<span class=hs-linenum> 35: </span><span class='hs-comment'>--</span>
<span class=hs-linenum> 36: </span><span class='hs-comment'>-- A handler converts the APIGatewayProxyRequest into a regular WAI Request</span>
<span class=hs-linenum> 37: </span><span class='hs-comment'>-- value. This is then passed into the Servant application and handled as if it</span>
<span class=hs-linenum> 38: </span><span class='hs-comment'>-- was a regular Servant request.</span>
<span class=hs-linenum> 39: </span><span class='hs-comment'>--</span>
<span class=hs-linenum> 40: </span><span class='hs-comment'>-- The passed Application is used to handle all requests coming into the handler.</span>
<span class=hs-linenum> 41: </span><span class='hs-definition'>makeHandler</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Application</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>APIGatewayHandler</span>
<span class=hs-linenum> 42: </span><a class=annot href="#"><span class=annottext>lq_tmp$x##4448:(lq_tmp$x##4446:Network.Wai.Internal.Request -&gt; lq_tmp$x##4447:(lq_tmp$x##4445:Network.Wai.Internal.Response -&gt; (GHC.Types.IO Network.Wai.Internal.ResponseReceived)) -&gt; (GHC.Types.IO Network.Wai.Internal.ResponseReceived)) -&gt; lq_tmp$x##4449:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest (Data.Aeson.Embedded.Embedded Data.Aeson.Types.Internal.Value)) -&gt; (GHC.Types.IO (AWSLambda.Events.APIGateway.APIGatewayProxyResponse (Data.Aeson.Embedded.Embedded Data.Aeson.Types.Internal.Value)))</span><span class='hs-definition'>makeHandler</span></a> <a class=annot href="#"><span class=annottext>lq_tmp$x##4446:Network.Wai.Internal.Request -&gt; lq_tmp$x##4447:(lq_tmp$x##4445:Network.Wai.Internal.Response -&gt; (GHC.Types.IO Network.Wai.Internal.ResponseReceived)) -&gt; (GHC.Types.IO Network.Wai.Internal.ResponseReceived)</span><span class='hs-varid'>application</span></a> <a class=annot href="#"><span class=annottext>(AWSLambda.Events.APIGateway.APIGatewayProxyRequest (Data.Aeson.Embedded.Embedded Data.Aeson.Types.Internal.Value))</span><span class='hs-varid'>apiGatewayRequest</span></a> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<span class=hs-linenum> 43: </span>  <a class=annot href="#"><span class=annottext>(GHC.IORef.IORef {lq_tmp$x##4681 : Data.ByteString.Lazy.Internal.ByteString | $k_##4680[VV##4679:=lq_tmp$x##4681][lq_tmp$x##4678:=lq_anf$##7205759403792845515##ddvl]})</span><span class='hs-varid'>responseRef</span></a> <span class='hs-keyglyph'>&lt;-</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4671 : Data.ByteString.Lazy.Internal.ByteString | $k_##4670[VV##4669:=lq_tmp$x##4671]}</span><span class='hs-varid'>newIORef</span></a> <a class=annot href="#"><span class=annottext>{VV : forall a . a | VV == Protolude.Debug.undefined}</span><span class='hs-conid'>Protolude.undefined</span></a>
<span class=hs-linenum> 44: </span>  <a class=annot href="#"><span class=annottext>{lq_tmp$x##4778 : Network.Wai.Internal.Request | $k_##4777[VV##4776:=lq_tmp$x##4778][lq_tmp$x##4766:=GHC.Base.$fFunctorIO][lq_tmp$x##4767:=lq_anf$##7205759403792845516##ddvm][lq_tmp$x##4768:=lq_anf$##7205759403792845517##ddvn]}</span><span class='hs-varid'>request</span></a> <span class='hs-keyglyph'>&lt;-</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4707:{lq_tmp$x##4713 : (GHC.IORef.IORef {lq_tmp$x##4712 : Data.ByteString.Internal.ByteString | $k_##4709[VV##4708:=lq_tmp$x##4712][VV##4710:=lq_tmp$x##4713][lq_tmp$x##4705:=ExternalInterfaces.ServantShim.proxyToRequest][lq_tmp$x##4706:=apiGatewayRequest##a9yK]}) | $k_##4711[VV##4710:=lq_tmp$x##4713][lq_tmp$x##4705:=ExternalInterfaces.ServantShim.proxyToRequest][lq_tmp$x##4706:=apiGatewayRequest##a9yK]} -&gt; {lq_tmp$x##4725 : Network.Wai.Internal.Request | $k_##4724[VV##4723:=lq_tmp$x##4725][lq_tmp$x##4705:=ExternalInterfaces.ServantShim.proxyToRequest][lq_tmp$x##4706:=apiGatewayRequest##a9yK]}</span><span class='hs-varid'>flip</span></a> <a class=annot href="#"><span class=annottext>lq_tmp$x##4734:{lq_tmp$x##4727 : (GHC.IORef.IORef {lq_tmp$x##4726 : Data.ByteString.Internal.ByteString | $k_##2035[VV##2034:=lq_tmp$x##4726][VV##2036:=lq_tmp$x##4727]}) | $k_##2037[VV##2036:=lq_tmp$x##4727]} -&gt; lq_tmp$x##4735:{lq_tmp$x##4730 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##4729 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##4728 : Data.Aeson.Types.Internal.Value | $k_##2040[VV##2039:=lq_tmp$x##4728][VV##2041:=lq_tmp$x##4729][VV##2043:=lq_tmp$x##4730][bodyRef##a9yX:=lq_tmp$x##4734]}) | $k_##2042[VV##2041:=lq_tmp$x##4729][VV##2043:=lq_tmp$x##4730][bodyRef##a9yX:=lq_tmp$x##4734]}) | $k_##2044[VV##2043:=lq_tmp$x##4730][bodyRef##a9yX:=lq_tmp$x##4734]} -&gt; {lq_tmp$x##4731 : Network.Wai.Internal.Request | $k_##2047[VV##2046:=lq_tmp$x##4731][apiGWRequest##a9yY:=lq_tmp$x##4735][bodyRef##a9yX:=lq_tmp$x##4734]}</span><span class='hs-varid'>proxyToRequest</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4738 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest (Data.Aeson.Embedded.Embedded Data.Aeson.Types.Internal.Value)) | lq_tmp$x##4738 == apiGatewayRequest##a9yK}</span><span class='hs-varid'>apiGatewayRequest</span></a> <span class='hs-varop'>&lt;$&gt;</span> <a class=annot href="#"><span class=annottext>(GHC.Types.IO (GHC.IORef.IORef {lq_tmp$x##4748 : Data.ByteString.Internal.ByteString | $k_##4747[VV##4746:=lq_tmp$x##4748][lq_tmp$x##4745:=reqBody##a9yL]}))</span><span class='hs-varid'>newIORef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4749 : Data.ByteString.Internal.ByteString | lq_tmp$x##4749 == reqBody##a9yL
                                                        &amp;&amp; $k_##4655[VV##4654:=lq_tmp$x##4749][lq_tmp$x##4651:=lq_anf$##7205759403792845508##ddve][lq_tmp$x##4652:=lq_anf$##7205759403792845510##ddvg][lq_tmp$x##4653:=lq_anf$##7205759403792845514##ddvk][lq_tmp$x##4656:=lq_tmp$x##4749]}</span><span class='hs-varid'>reqBody</span></a>
<span class=hs-linenum> 45: </span>  <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>&lt;-</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4821:(lq_tmp$x##4819:Network.Wai.Internal.Response -&gt; (GHC.Types.IO Network.Wai.Internal.ResponseReceived)) -&gt; (GHC.Types.IO Network.Wai.Internal.ResponseReceived)</span><span class='hs-varid'>application</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4822 : Network.Wai.Internal.Request | lq_tmp$x##4822 == request##a9yN
                                                 &amp;&amp; $k_##4777[VV##4776:=lq_tmp$x##4822][lq_tmp$x##4766:=GHC.Base.$fFunctorIO][lq_tmp$x##4767:=lq_anf$##7205759403792845516##ddvm][lq_tmp$x##4768:=lq_anf$##7205759403792845517##ddvn][lq_tmp$x##4778:=lq_tmp$x##4822]}</span><span class='hs-varid'>request</span></a> <span class='hs-varop'>$</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4806:{lq_tmp$x##4800 : Network.Wai.Internal.Response | $k_##3706[VV##3705:=lq_tmp$x##4800][lq_tmp$x##4805:=responseRef##a9yM][responseRef##a9yP:=responseRef##a9yM]} -&gt; {lq_tmp$x##4802 : (GHC.Types.IO {lq_tmp$x##4801 : Network.Wai.Internal.ResponseReceived | $k_##4380[VV##4379:=lq_tmp$x##4801][VV##4381:=lq_tmp$x##4802][lq_tmp$x##4805:=responseRef##a9yM][resp##a9yQ:=lq_tmp$x##4806][responseRef##a9yP:=responseRef##a9yM]}) | $k_##4382[VV##4381:=lq_tmp$x##4802][lq_tmp$x##4805:=responseRef##a9yM][resp##a9yQ:=lq_tmp$x##4806][responseRef##a9yP:=responseRef##a9yM]}</span><span class='hs-varid'>streamResponseTo</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4808 : (GHC.IORef.IORef {lq_tmp$x##4807 : Data.ByteString.Lazy.Internal.ByteString | $k_##4680[VV##4679:=lq_tmp$x##4807][lq_tmp$x##4675:=lq_tmp$x##4808][lq_tmp$x##4678:=lq_anf$##7205759403792845515##ddvl][lq_tmp$x##4681:=lq_tmp$x##4807]}) | lq_tmp$x##4808 == responseRef##a9yM}</span><span class='hs-varid'>responseRef</span></a>
<span class=hs-linenum> 46: </span>  <a class=annot href="#"><span class=annottext>{lq_tmp$x##4837 : Data.ByteString.Lazy.Internal.ByteString | $k_##4836[VV##4835:=lq_tmp$x##4837][lq_tmp$x##4834:=responseRef##a9yM]}</span><span class='hs-varid'>result</span></a> <span class='hs-keyglyph'>&lt;-</span> <a class=annot href="#"><span class=annottext>(GHC.Types.IO {lq_tmp$x##4837 : Data.ByteString.Lazy.Internal.ByteString | $k_##4836[VV##4835:=lq_tmp$x##4837][lq_tmp$x##4834:=responseRef##a9yM]})</span><span class='hs-varid'>readIORef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4839 : (GHC.IORef.IORef {lq_tmp$x##4838 : Data.ByteString.Lazy.Internal.ByteString | $k_##4680[VV##4679:=lq_tmp$x##4838][lq_tmp$x##4675:=lq_tmp$x##4839][lq_tmp$x##4678:=lq_anf$##7205759403792845515##ddvl][lq_tmp$x##4681:=lq_tmp$x##4838]}) | lq_tmp$x##4839 == responseRef##a9yM}</span><span class='hs-varid'>responseRef</span></a>
<span class=hs-linenum> 47: </span>  <a class=annot href="#"><span class=annottext>forall a . lq_tmp$x##12:a -&gt; (GHC.Types.IO a)</span><span class='hs-varid'>pure</span></a> <span class='hs-varop'>.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4933:{lq_tmp$x##4928 : (GHC.Maybe.Maybe {lq_tmp$x##4927 : Data.Aeson.Types.Internal.Value | $k_##1514[VV##1513:=lq_tmp$x##4927][VV##1515:=lq_tmp$x##4928]}) | $k_##1516[VV##1515:=lq_tmp$x##4928]} -&gt; {lq_tmp$x##4931 : (AWSLambda.Events.APIGateway.APIGatewayProxyResponse {lq_tmp$x##4930 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##4929 : Data.Aeson.Types.Internal.Value | $k_##1519[VV##1518:=lq_tmp$x##4929][VV##1520:=lq_tmp$x##4930][VV##1522:=lq_tmp$x##4931][ds_ddll:=lq_tmp$x##4933]}) | $k_##1521[VV##1520:=lq_tmp$x##4930][VV##1522:=lq_tmp$x##4931][ds_ddll:=lq_tmp$x##4933]}) | $k_##1523[VV##1522:=lq_tmp$x##4931][ds_ddll:=lq_tmp$x##4933]}</span><span class='hs-varid'>responseFromBody</span></a> <span class='hs-varop'>.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4879:Data.ByteString.Lazy.Internal.ByteString -&gt; (GHC.Maybe.Maybe Data.Aeson.Types.Internal.Value)</span><span class='hs-varid'>decode</span></a> <span class='hs-varop'>$</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##5010 : Data.ByteString.Lazy.Internal.ByteString | lq_tmp$x##5010 == result##a9yO
                                                             &amp;&amp; $k_##4836[VV##4835:=lq_tmp$x##5010][lq_tmp$x##4834:=responseRef##a9yM][lq_tmp$x##4837:=lq_tmp$x##5010]}</span><span class='hs-varid'>result</span></a>
<span class=hs-linenum> 48: </span>  <span class='hs-keyword'>where</span>
<span class=hs-linenum> 49: </span>    <a class=annot href="#"><span class=annottext>{lq_tmp$x##4656 : Data.ByteString.Internal.ByteString | $k_##4655[VV##4654:=lq_tmp$x##4656][lq_tmp$x##4651:=lq_anf$##7205759403792845508##ddve][lq_tmp$x##4652:=lq_anf$##7205759403792845510##ddvg][lq_tmp$x##4653:=lq_anf$##7205759403792845514##ddvk]}</span><span class='hs-varid'>reqBody</span></a> <span class='hs-keyglyph'>=</span>
<span class=hs-linenum> 50: </span>      <a class=annot href="#"><span class=annottext>lq_tmp$x##4653:(GHC.Maybe.Maybe {lq_tmp$x##4659 : Data.Aeson.Types.Internal.Value | $k_##4658[VV##4657:=lq_tmp$x##4659][lq_tmp$x##4651:=lq_anf$##7205759403792845508##ddve][lq_tmp$x##4652:=lq_anf$##7205759403792845510##ddvg]}) -&gt; {lq_tmp$x##4656 : Data.ByteString.Internal.ByteString | $k_##4655[VV##4654:=lq_tmp$x##4656][lq_tmp$x##4651:=lq_anf$##7205759403792845508##ddve][lq_tmp$x##4652:=lq_anf$##7205759403792845510##ddvg]}</span><span class='hs-varid'>maybe</span></a> <a class=annot href="#"><span class=annottext>Data.ByteString.Internal.ByteString</span><span class='hs-varid'>mempty</span></a> <a class=annot href="#"><span class=annottext>xcmp:{lq_tmp$x##4482 : Data.Aeson.Types.Internal.Value | $k_##4481[VV##4480:=lq_tmp$x##4482][lq_tmp$db##13:=Data.ByteString.Lazy.toStrict][lq_tmp$db##15:=lq_anf$##7205759403792845509##ddvf]} -&gt; {lq_tmp$x##4479 : Data.ByteString.Internal.ByteString | $k_##4478[VV##4477:=lq_tmp$x##4479][lq_tmp$db##13:=Data.ByteString.Lazy.toStrict][lq_tmp$db##15:=lq_anf$##7205759403792845509##ddvf]
                                                                                                                                                                                                                                                          &amp;&amp; $k_##4484[VV##4483:=lq_tmp$x##4479][lq_tmp$db##13:=Data.ByteString.Lazy.toStrict][lq_tmp$db##15:=lq_anf$##7205759403792845509##ddvf][lq_tmp$x##4485:=xcmp]}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>lq_tmp$x##4500:Data.ByteString.Lazy.Internal.ByteString -&gt; Data.ByteString.Internal.ByteString</span><span class='hs-conid'>BL.toStrict</span></a> <span class='hs-varop'>.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4468:Data.Aeson.Types.Internal.Value -&gt; Data.ByteString.Lazy.Internal.ByteString</span><span class='hs-varid'>encode</span></a><span class='hs-layout'>)</span> <span class='hs-varop'>$</span>
<span class=hs-linenum> 51: </span>      <a class=annot href="#"><span class=annottext>{lq_tmp$x##4612 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest (Data.Aeson.Embedded.Embedded Data.Aeson.Types.Internal.Value)) | lq_tmp$x##4612 == apiGatewayRequest##a9yK}</span><span class='hs-varid'>apiGatewayRequest</span></a> <span class='hs-varop'>^.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##4548:(lq_tmp$x##4545:(GHC.Maybe.Maybe {lq_tmp$x##4552 : Data.Aeson.Types.Internal.Value | $k_##4551[VV##4550:=lq_tmp$x##4552][lq_tmp$x##4546:=lq_anf$##7205759403792845511##ddvh][lq_tmp$x##4547:=lq_anf$##7205759403792845512##ddvi]}) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) (GHC.Maybe.Maybe Data.Aeson.Types.Internal.Value) (GHC.Maybe.Maybe {lq_tmp$x##4552 : Data.Aeson.Types.Internal.Value | $k_##4551[VV##4550:=lq_tmp$x##4552][lq_tmp$x##4546:=lq_anf$##7205759403792845511##ddvh][lq_tmp$x##4547:=lq_anf$##7205759403792845512##ddvi]}))) -&gt; lq_tmp$x##4549:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest (Data.Aeson.Embedded.Embedded {lq_tmp$x##4552 : Data.Aeson.Types.Internal.Value | $k_##4551[VV##4550:=lq_tmp$x##4552][lq_tmp$x##4546:=lq_anf$##7205759403792845511##ddvh][lq_tmp$x##4547:=lq_anf$##7205759403792845512##ddvi]})) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) (GHC.Maybe.Maybe Data.Aeson.Types.Internal.Value) (AWSLambda.Events.APIGateway.APIGatewayProxyRequest (Data.Aeson.Embedded.Embedded {lq_tmp$x##4552 : Data.Aeson.Types.Internal.Value | $k_##4551[VV##4550:=lq_tmp$x##4552][lq_tmp$x##4546:=lq_anf$##7205759403792845511##ddvh][lq_tmp$x##4547:=lq_anf$##7205759403792845512##ddvi]})))</span><span class='hs-varid'>requestBodyEmbedded</span></a>
<span class=hs-linenum> 52: </span>
<span class=hs-linenum> 53: </span><span class='hs-comment'>-- | Streams an HTTP response into an IORef, confirming receipt of the response.</span>
<span class=hs-linenum> 54: </span><span class='hs-comment'>--</span>
<span class=hs-linenum> 55: </span><span class='hs-comment'>-- This is intended to be used to construct the second argument to the WAI</span>
<span class=hs-linenum> 56: </span><span class='hs-comment'>-- Application type, a (Response -&gt; IO ResponseReceived) function. This allows</span>
<span class=hs-linenum> 57: </span><span class='hs-comment'>-- us to extract the response from a WAI application without sending that</span>
<span class=hs-linenum> 58: </span><span class='hs-comment'>-- response to the client.</span>
<span class=hs-linenum> 59: </span><span class='hs-definition'>streamResponseTo</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IORef</span> <span class='hs-conid'>BL.ByteString</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Response</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>ResponseReceived</span>
<span class=hs-linenum> 60: </span><a class=annot href="#"><span class=annottext>responseRef##a9yP:{VV##3702 : (GHC.IORef.IORef {VV##3700 : Data.ByteString.Lazy.Internal.ByteString | $k_##3701}) | $k_##3703} -&gt; resp##a9yQ:{VV##3705 : Network.Wai.Internal.Response | $k_##3706} -&gt; {VV##4381 : (GHC.Types.IO {VV##4379 : Network.Wai.Internal.ResponseReceived | $k_##4380}) | $k_##4382}</span><span class='hs-definition'>streamResponseTo</span></a> <a class=annot href="#"><span class=annottext>{VV##3702 : (GHC.IORef.IORef {VV##3700 : Data.ByteString.Lazy.Internal.ByteString | $k_##3701}) | $k_##3703}</span><span class='hs-varid'>responseRef</span></a> <a class=annot href="#"><span class=annottext>{VV##3705 : Network.Wai.Internal.Response | $k_##3706}</span><span class='hs-varid'>resp</span></a> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<span class=hs-linenum> 61: </span>  <a class=annot href="#"><span class=annottext>{VV##3708 : Data.ByteString.Lazy.Internal.ByteString | $k_##3709}</span><span class='hs-varid'>body</span></a> <span class='hs-keyglyph'>&lt;-</span>
<span class=hs-linenum> 62: </span>    <span class='hs-keyword'>case</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3712 : Network.Wai.Internal.Response | lq_tmp$x##3712 == resp##a9yQ
                                                  &amp;&amp; $k_##3706[VV##3705:=lq_tmp$x##3712]}</span><span class='hs-varid'>resp</span></a> <span class='hs-keyword'>of</span>
<span class=hs-linenum> 63: </span>      <span class='hs-conid'>ResponseBuilder</span> <span class='hs-keyword'>_</span> <span class='hs-keyword'>_</span> <span class='hs-varid'>builder</span> <span class='hs-keyglyph'>-&gt;</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##12:{lq_tmp$x##3994 : Data.ByteString.Lazy.Internal.ByteString | $k_##3993[VV##3992:=lq_tmp$x##3994]} -&gt; (GHC.Types.IO {lq_tmp$x##3994 : Data.ByteString.Lazy.Internal.ByteString | $k_##3993[VV##3992:=lq_tmp$x##3994]})</span><span class='hs-varid'>pure</span></a> <span class='hs-varop'>$</span> <a class=annot href="#"><span class=annottext>Data.ByteString.Lazy.Internal.ByteString</span><span class='hs-varid'>toLazyByteString</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3978 : Data.ByteString.Builder.Internal.Builder | lq_tmp$x##3978 == builder##a9yR}</span><span class='hs-varid'>builder</span></a>
<span class=hs-linenum> 64: </span>      <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>-&gt;</span>
<span class=hs-linenum> 65: </span>        <a class=annot href="#"><span class=annottext>lq_tmp$x##4367:GHC.IO.Exception.IOException -&gt; (GHC.Types.IO {lq_tmp$x##4372 : Data.ByteString.Lazy.Internal.ByteString | $k_##4371[VV##4370:=lq_tmp$x##4372][lq_tmp$x##4365:=Control.Monad.IO.Class.$fMonadIOIO][lq_tmp$x##4366:=GHC.IO.Exception.$fExceptionIOException]})</span><span class='hs-varid'>throwIO</span></a> <span class='hs-varop'>$</span>
<span class=hs-linenum> 66: </span>        <span class='hs-conid'>IOError</span>
<span class=hs-linenum> 67: </span>          <a class=annot href="#"><span class=annottext>{VV : forall a .
      {lq_tmp$x##4245 : (GHC.Maybe.Maybe a) | not (isJust lq_tmp$x##4245)} | VV == GHC.Maybe.Nothing}</span><span class='hs-conid'>Nothing</span></a>
<span class=hs-linenum> 68: </span>          <a class=annot href="#"><span class=annottext>{lq_tmp$x##4334 : GHC.IO.Exception.IOErrorType | lq_tmp$x##4334 == GHC.IO.Exception.OtherError}</span><span class='hs-conid'>OtherError</span></a>
<span class=hs-linenum> 69: </span>          <a class=annot href="#"><span class=annottext>{VV : forall a &lt;p :: a a -&gt; Bool&gt;.
      {lq_tmp$x##4253 : [a]&lt;\lq_tmp$x##4254 VV -&gt; {lq_tmp$x##4252 : a&lt;p lq_tmp$x##4254&gt; | true}&gt; | len lq_tmp$x##4253 == 0} | VV == GHC.Types.[]}</span><span class='hs-str'>""</span></a>
<span class=hs-linenum> 70: </span>          <a class=annot href="#"><span class=annottext>{lq_tmp$x##4269 : [GHC.Types.Char] | len lq_tmp$x##4269 == strLen lq_anf$##7205759403792845491##dduX
                                     &amp;&amp; lq_tmp$x##4269 ~~ lq_anf$##7205759403792845491##dduX}</span><span class='hs-str'>"unable to process response"</span></a>
<span class=hs-linenum> 71: </span>          <a class=annot href="#"><span class=annottext>{VV : forall a .
      {lq_tmp$x##4276 : (GHC.Maybe.Maybe a) | not (isJust lq_tmp$x##4276)} | VV == GHC.Maybe.Nothing}</span><span class='hs-conid'>Nothing</span></a>
<span class=hs-linenum> 72: </span>          <a class=annot href="#"><span class=annottext>{VV : forall a .
      {lq_tmp$x##4282 : (GHC.Maybe.Maybe a) | not (isJust lq_tmp$x##4282)} | VV == GHC.Maybe.Nothing}</span><span class='hs-conid'>Nothing</span></a>
<span class=hs-linenum> 73: </span>  <a class=annot href="#"><span class=annottext>(GHC.Types.IO ())</span><span class='hs-varid'>writeIORef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4396 : (GHC.IORef.IORef {lq_tmp$x##4395 : Data.ByteString.Lazy.Internal.ByteString | $k_##3701[VV##3700:=lq_tmp$x##4395][VV##3702:=lq_tmp$x##4396]}) | lq_tmp$x##4396 == responseRef##a9yP
                                                                                                                                                                  &amp;&amp; $k_##3703[VV##3702:=lq_tmp$x##4396]}</span><span class='hs-varid'>responseRef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4397 : Data.ByteString.Lazy.Internal.ByteString | lq_tmp$x##4397 == body##a9yS
                                                             &amp;&amp; $k_##3709[VV##3708:=lq_tmp$x##4397]}</span><span class='hs-varid'>body</span></a>
<span class=hs-linenum> 74: </span>  <a class=annot href="#"><span class=annottext>(GHC.Types.IO {lq_tmp$x##4413 : Network.Wai.Internal.ResponseReceived | $k_##4412[VV##4411:=lq_tmp$x##4413][lq_tmp$x##12:=Network.Wai.Internal.ResponseReceived]})</span><span class='hs-varid'>pure</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##4414 : Network.Wai.Internal.ResponseReceived | lq_tmp$x##4414 == Network.Wai.Internal.ResponseReceived}</span><span class='hs-conid'>ResponseReceived</span></a>
<span class=hs-linenum> 75: </span>
<span class=hs-linenum> 76: </span><span class='hs-definition'>addCorsHeaders</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ResponseHeaders</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>ResponseHeaders</span>
<span class=hs-linenum> 77: </span><a class=annot href="#"><span class=annottext>headers##a9yT:{VV##1083 : [{VV##1069 : ({VV##1062 : (Data.CaseInsensitive.Internal.CI {VV##1060 : Data.ByteString.Internal.ByteString | $k_##1061}) | $k_##1063}, {VV##1064 : Data.ByteString.Internal.ByteString | $k_##1065})&lt;\lq_tmp$x##1066 VV -&gt; {VV##1067 : Data.ByteString.Internal.ByteString | $k_##1068}&gt; | $k_##1070}]&lt;\lq_tmp$x##1071 VV -&gt; {VV##1081 : ({VV##1074 : (Data.CaseInsensitive.Internal.CI {VV##1072 : Data.ByteString.Internal.ByteString | $k_##1073}) | $k_##1075}, {VV##1076 : Data.ByteString.Internal.ByteString | $k_##1077})&lt;\lq_tmp$x##1078 VV -&gt; {VV##1079 : Data.ByteString.Internal.ByteString | $k_##1080}&gt; | $k_##1082}&gt; | $k_##1084} -&gt; {VV##1109 : [{VV##1095 : ({VV##1088 : (Data.CaseInsensitive.Internal.CI {VV##1086 : Data.ByteString.Internal.ByteString | $k_##1087}) | $k_##1089}, {VV##1090 : Data.ByteString.Internal.ByteString | $k_##1091})&lt;\lq_tmp$x##1092 VV -&gt; {VV##1093 : Data.ByteString.Internal.ByteString | $k_##1094}&gt; | $k_##1096}]&lt;\lq_tmp$x##1097 VV -&gt; {VV##1107 : ({VV##1100 : (Data.CaseInsensitive.Internal.CI {VV##1098 : Data.ByteString.Internal.ByteString | $k_##1099}) | $k_##1101}, {VV##1102 : Data.ByteString.Internal.ByteString | $k_##1103})&lt;\lq_tmp$x##1104 VV -&gt; {VV##1105 : Data.ByteString.Internal.ByteString | $k_##1106}&gt; | $k_##1108}&gt; | $k_##1110}</span><span class='hs-definition'>addCorsHeaders</span></a> <a class=annot href="#"><span class=annottext>{VV##1083 : [{VV##1069 : ({VV##1062 : (Data.CaseInsensitive.Internal.CI {VV##1060 : Data.ByteString.Internal.ByteString | $k_##1061}) | $k_##1063}, {VV##1064 : Data.ByteString.Internal.ByteString | $k_##1065})&lt;\lq_tmp$x##1066 VV -&gt; {VV##1067 : Data.ByteString.Internal.ByteString | $k_##1068}&gt; | $k_##1070}]&lt;\lq_tmp$x##1071 VV -&gt; {VV##1081 : ({VV##1074 : (Data.CaseInsensitive.Internal.CI {VV##1072 : Data.ByteString.Internal.ByteString | $k_##1073}) | $k_##1075}, {VV##1076 : Data.ByteString.Internal.ByteString | $k_##1077})&lt;\lq_tmp$x##1078 VV -&gt; {VV##1079 : Data.ByteString.Internal.ByteString | $k_##1080}&gt; | $k_##1082}&gt; | $k_##1084}</span><span class='hs-varid'>headers</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##1465 : ({lq_tmp$x##1461 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1460 : Data.ByteString.Internal.ByteString | $k_##1327[VV##1326:=lq_tmp$x##1460][VV##1328:=lq_tmp$x##1461][lq_tmp$x##1320:=lq_tmp$x##1465][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud][lq_tmp$x##1330:=lq_tmp$x##1460][lq_tmp$x##1331:=lq_tmp$x##1461]}) | $k_##1329[VV##1328:=lq_tmp$x##1461][lq_tmp$x##1320:=lq_tmp$x##1465][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud][lq_tmp$x##1331:=lq_tmp$x##1461]}, {lq_tmp$x##1462 : Data.ByteString.Internal.ByteString | $k_##1333[VV##1332:=lq_tmp$x##1462][lq_tmp$x##1320:=lq_tmp$x##1465][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud][lq_tmp$x##1334:=lq_tmp$x##1462]})&lt;\lq_tmp$x##1466 VV -&gt; {lq_tmp$x##1464 : Data.ByteString.Internal.ByteString | $k_##1336[VV##1335:=lq_tmp$x##1464][lq_tmp$x##1320:=lq_tmp$x##1465][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud][lq_tmp$x##1325:=lq_tmp$x##1466][lq_tmp$x##1334:=lq_tmp$x##1464][lq_tmp$x##1337:=lq_tmp$x##1466][lq_tmp$x##1463:=lq_tmp$x##1466]}&gt; | lq_tmp$x##1465 == allowOrigin##a9yU
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; fst lq_tmp$x##1465 == lq_anf$##7205759403792845442##ddua
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; snd lq_tmp$x##1465 == lq_anf$##7205759403792845445##ddud
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple21 lq_tmp$x##1465 == lq_anf$##7205759403792845442##ddua
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple22 lq_tmp$x##1465 == lq_anf$##7205759403792845445##ddud}</span><span class='hs-varid'>allowOrigin</span></a> <span class='hs-conop'>:</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##1394 : ({lq_tmp$x##1390 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1389 : Data.ByteString.Internal.ByteString | $k_##1211[VV##1210:=lq_tmp$x##1389][VV##1212:=lq_tmp$x##1390][lq_tmp$x##1204:=lq_tmp$x##1394][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7][lq_tmp$x##1214:=lq_tmp$x##1389][lq_tmp$x##1215:=lq_tmp$x##1390]}) | $k_##1213[VV##1212:=lq_tmp$x##1390][lq_tmp$x##1204:=lq_tmp$x##1394][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7][lq_tmp$x##1215:=lq_tmp$x##1390]}, {lq_tmp$x##1391 : Data.ByteString.Internal.ByteString | $k_##1217[VV##1216:=lq_tmp$x##1391][lq_tmp$x##1204:=lq_tmp$x##1394][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7][lq_tmp$x##1218:=lq_tmp$x##1391]})&lt;\lq_tmp$x##1395 VV -&gt; {lq_tmp$x##1393 : Data.ByteString.Internal.ByteString | $k_##1220[VV##1219:=lq_tmp$x##1393][lq_tmp$x##1204:=lq_tmp$x##1394][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7][lq_tmp$x##1209:=lq_tmp$x##1395][lq_tmp$x##1218:=lq_tmp$x##1393][lq_tmp$x##1221:=lq_tmp$x##1395][lq_tmp$x##1392:=lq_tmp$x##1395]}&gt; | lq_tmp$x##1394 == allowCredentials##a9yV
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; fst lq_tmp$x##1394 == lq_anf$##7205759403792845436##ddu4
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; snd lq_tmp$x##1394 == lq_anf$##7205759403792845439##ddu7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple21 lq_tmp$x##1394 == lq_anf$##7205759403792845436##ddu4
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple22 lq_tmp$x##1394 == lq_anf$##7205759403792845439##ddu7}</span><span class='hs-varid'>allowCredentials</span></a> <span class='hs-conop'>:</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##1409 : [{lq_tmp$x##1401 : ({lq_tmp$x##1397 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1396 : Data.ByteString.Internal.ByteString | $k_##1061[VV##1060:=lq_tmp$x##1396][VV##1062:=lq_tmp$x##1397][VV##1069:=lq_tmp$x##1401][VV##1083:=lq_tmp$x##1409]}) | $k_##1063[VV##1062:=lq_tmp$x##1397][VV##1069:=lq_tmp$x##1401][VV##1083:=lq_tmp$x##1409]}, {lq_tmp$x##1398 : Data.ByteString.Internal.ByteString | $k_##1065[VV##1064:=lq_tmp$x##1398][VV##1069:=lq_tmp$x##1401][VV##1083:=lq_tmp$x##1409]})&lt;\lq_tmp$x##1410 VV -&gt; {lq_tmp$x##1400 : Data.ByteString.Internal.ByteString | $k_##1068[VV##1067:=lq_tmp$x##1400][VV##1069:=lq_tmp$x##1401][VV##1083:=lq_tmp$x##1409][lq_tmp$x##1066:=lq_tmp$x##1410][lq_tmp$x##1399:=lq_tmp$x##1410]}&gt; | $k_##1070[VV##1069:=lq_tmp$x##1401][VV##1083:=lq_tmp$x##1409]}]&lt;\lq_tmp$x##1412 VV -&gt; {lq_tmp$x##1408 : ({lq_tmp$x##1404 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1403 : Data.ByteString.Internal.ByteString | $k_##1073[VV##1072:=lq_tmp$x##1403][VV##1074:=lq_tmp$x##1404][VV##1081:=lq_tmp$x##1408][VV##1083:=lq_tmp$x##1409][lq_tmp$x##1071:=lq_tmp$x##1412][lq_tmp$x##1402:=lq_tmp$x##1412]}) | $k_##1075[VV##1074:=lq_tmp$x##1404][VV##1081:=lq_tmp$x##1408][VV##1083:=lq_tmp$x##1409][lq_tmp$x##1071:=lq_tmp$x##1412][lq_tmp$x##1402:=lq_tmp$x##1412]}, {lq_tmp$x##1405 : Data.ByteString.Internal.ByteString | $k_##1077[VV##1076:=lq_tmp$x##1405][VV##1081:=lq_tmp$x##1408][VV##1083:=lq_tmp$x##1409][lq_tmp$x##1071:=lq_tmp$x##1412][lq_tmp$x##1402:=lq_tmp$x##1412]})&lt;\lq_tmp$x##1411 VV -&gt; {lq_tmp$x##1407 : Data.ByteString.Internal.ByteString | $k_##1080[VV##1079:=lq_tmp$x##1407][VV##1081:=lq_tmp$x##1408][VV##1083:=lq_tmp$x##1409][lq_tmp$x##1071:=lq_tmp$x##1412][lq_tmp$x##1078:=lq_tmp$x##1411][lq_tmp$x##1402:=lq_tmp$x##1412][lq_tmp$x##1406:=lq_tmp$x##1411]}&gt; | $k_##1082[VV##1081:=lq_tmp$x##1408][VV##1083:=lq_tmp$x##1409][lq_tmp$x##1071:=lq_tmp$x##1412][lq_tmp$x##1402:=lq_tmp$x##1412]}&gt; | lq_tmp$x##1409 == headers##a9yT
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 &amp;&amp; len lq_tmp$x##1409 &gt;= 0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 &amp;&amp; $k_##1084[VV##1083:=lq_tmp$x##1409]}</span><span class='hs-varid'>headers</span></a>
<span class=hs-linenum> 78: </span>  <span class='hs-keyword'>where</span>
<span class=hs-linenum> 79: </span>    <a class=annot href="#"><span class=annottext>{lq_tmp$x##1320 : ({lq_tmp$x##1331 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1330 : Data.ByteString.Internal.ByteString | $k_##1327[VV##1326:=lq_tmp$x##1330][VV##1328:=lq_tmp$x##1331][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud]}) | $k_##1329[VV##1328:=lq_tmp$x##1331][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud]}, {lq_tmp$x##1334 : Data.ByteString.Internal.ByteString | $k_##1333[VV##1332:=lq_tmp$x##1334][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud]})&lt;\lq_tmp$x##1325 VV -&gt; {lq_tmp$x##1334 : Data.ByteString.Internal.ByteString | $k_##1336[VV##1335:=lq_tmp$x##1334][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud][lq_tmp$x##1337:=lq_tmp$x##1325]}&gt; | fst lq_tmp$x##1320 == lq_anf$##7205759403792845442##ddua
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; snd lq_tmp$x##1320 == lq_anf$##7205759403792845445##ddud
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple21 lq_tmp$x##1320 == lq_anf$##7205759403792845442##ddua
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple22 lq_tmp$x##1320 == lq_anf$##7205759403792845445##ddud}</span><span class='hs-varid'>allowOrigin</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##1320 : ({lq_tmp$x##1331 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1330 : Data.ByteString.Internal.ByteString | $k_##1327[VV##1326:=lq_tmp$x##1330][VV##1328:=lq_tmp$x##1331][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud]}) | $k_##1329[VV##1328:=lq_tmp$x##1331][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud]}, {lq_tmp$x##1334 : Data.ByteString.Internal.ByteString | $k_##1333[VV##1332:=lq_tmp$x##1334][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud]})&lt;\lq_tmp$x##1325 VV -&gt; {lq_tmp$x##1334 : Data.ByteString.Internal.ByteString | $k_##1336[VV##1335:=lq_tmp$x##1334][lq_tmp$x##1323:=lq_anf$##7205759403792845442##ddua][lq_tmp$x##1324:=lq_anf$##7205759403792845445##ddud][lq_tmp$x##1337:=lq_tmp$x##1325]}&gt; | fst lq_tmp$x##1320 == lq_anf$##7205759403792845442##ddua
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; snd lq_tmp$x##1320 == lq_anf$##7205759403792845445##ddud
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple21 lq_tmp$x##1320 == lq_anf$##7205759403792845442##ddua
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple22 lq_tmp$x##1320 == lq_anf$##7205759403792845445##ddud}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>(Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString)</span><span class='hs-str'>"Access-Control-Allow-Origin"</span></a><span class='hs-layout'>,</span> <a class=annot href="#"><span class=annottext>Data.ByteString.Internal.ByteString</span><span class='hs-str'>"*"</span></a><span class='hs-layout'>)</span>
<span class=hs-linenum> 80: </span>    <a class=annot href="#"><span class=annottext>{lq_tmp$x##1204 : ({lq_tmp$x##1215 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1214 : Data.ByteString.Internal.ByteString | $k_##1211[VV##1210:=lq_tmp$x##1214][VV##1212:=lq_tmp$x##1215][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7]}) | $k_##1213[VV##1212:=lq_tmp$x##1215][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7]}, {lq_tmp$x##1218 : Data.ByteString.Internal.ByteString | $k_##1217[VV##1216:=lq_tmp$x##1218][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7]})&lt;\lq_tmp$x##1209 VV -&gt; {lq_tmp$x##1218 : Data.ByteString.Internal.ByteString | $k_##1220[VV##1219:=lq_tmp$x##1218][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7][lq_tmp$x##1221:=lq_tmp$x##1209]}&gt; | fst lq_tmp$x##1204 == lq_anf$##7205759403792845436##ddu4
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; snd lq_tmp$x##1204 == lq_anf$##7205759403792845439##ddu7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple21 lq_tmp$x##1204 == lq_anf$##7205759403792845436##ddu4
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple22 lq_tmp$x##1204 == lq_anf$##7205759403792845439##ddu7}</span><span class='hs-varid'>allowCredentials</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##1204 : ({lq_tmp$x##1215 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1214 : Data.ByteString.Internal.ByteString | $k_##1211[VV##1210:=lq_tmp$x##1214][VV##1212:=lq_tmp$x##1215][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7]}) | $k_##1213[VV##1212:=lq_tmp$x##1215][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7]}, {lq_tmp$x##1218 : Data.ByteString.Internal.ByteString | $k_##1217[VV##1216:=lq_tmp$x##1218][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7]})&lt;\lq_tmp$x##1209 VV -&gt; {lq_tmp$x##1218 : Data.ByteString.Internal.ByteString | $k_##1220[VV##1219:=lq_tmp$x##1218][lq_tmp$x##1207:=lq_anf$##7205759403792845436##ddu4][lq_tmp$x##1208:=lq_anf$##7205759403792845439##ddu7][lq_tmp$x##1221:=lq_tmp$x##1209]}&gt; | fst lq_tmp$x##1204 == lq_anf$##7205759403792845436##ddu4
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; snd lq_tmp$x##1204 == lq_anf$##7205759403792845439##ddu7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple21 lq_tmp$x##1204 == lq_anf$##7205759403792845436##ddu4
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &amp;&amp; x_Tuple22 lq_tmp$x##1204 == lq_anf$##7205759403792845439##ddu7}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>(Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString)</span><span class='hs-str'>"Access-Control-Allow-Credentials"</span></a><span class='hs-layout'>,</span> <a class=annot href="#"><span class=annottext>Data.ByteString.Internal.ByteString</span><span class='hs-str'>"true"</span></a><span class='hs-layout'>)</span>
<span class=hs-linenum> 81: </span>
<span class=hs-linenum> 82: </span><span class='hs-definition'>responseFromBody</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Maybe</span> <span class='hs-conid'>Value</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>APIGatewayProxyResponse</span> <span class='hs-layout'>(</span><span class='hs-conid'>Embedded</span> <span class='hs-conid'>Value</span><span class='hs-layout'>)</span>
<span class=hs-linenum> 83: </span><span class='hs-comment'>--responseFromBody Nothing = responseBadRequest -- telegram repeatedly sends request if it was sent this</span>
<span class=hs-linenum> 84: </span><a class=annot href="#"><span class=annottext>ds_ddll:{VV##1515 : (GHC.Maybe.Maybe {VV##1513 : Data.Aeson.Types.Internal.Value | $k_##1514}) | $k_##1516} -&gt; {VV##1522 : (AWSLambda.Events.APIGateway.APIGatewayProxyResponse {VV##1520 : (Data.Aeson.Embedded.Embedded {VV##1518 : Data.Aeson.Types.Internal.Value | $k_##1519}) | $k_##1521}) | $k_##1523}</span><span class='hs-definition'>responseFromBody</span></a> <span class='hs-conid'>Nothing</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{VV : forall body .
      (AWSLambda.Events.APIGateway.APIGatewayProxyResponse body) | VV == AWSLambda.Events.APIGateway.responseOK}</span><span class='hs-varid'>responseOK</span></a>
<span class=hs-linenum> 85: </span><span class='hs-definition'>responseFromBody</span> <span class='hs-layout'>(</span><span class='hs-conid'>Just</span> <span class='hs-varid'>body</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span>
<span class=hs-linenum> 86: </span>  <a class=annot href="#"><span class=annottext>{VV : forall body .
      (AWSLambda.Events.APIGateway.APIGatewayProxyResponse body) | VV == AWSLambda.Events.APIGateway.responseOK}</span><span class='hs-varid'>responseOK</span></a> <span class='hs-varop'>&amp;</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##1588:(lq_tmp$x##1586:(GHC.Maybe.Maybe {lq_tmp$x##1592 : Data.Aeson.Types.Internal.Value | $k_##1591[VV##1590:=lq_tmp$x##1592][lq_tmp$x##1587:=Control.Lens.Internal.Setter.$fSettableIdentity]}) -&gt; (Data.Functor.Identity.Identity (GHC.Maybe.Maybe {lq_tmp$x##1592 : Data.Aeson.Types.Internal.Value | $k_##1591[VV##1590:=lq_tmp$x##1592][lq_tmp$x##1587:=Control.Lens.Internal.Setter.$fSettableIdentity]}))) -&gt; lq_tmp$x##1589:(AWSLambda.Events.APIGateway.APIGatewayProxyResponse (Data.Aeson.Embedded.Embedded {lq_tmp$x##1592 : Data.Aeson.Types.Internal.Value | $k_##1591[VV##1590:=lq_tmp$x##1592][lq_tmp$x##1587:=Control.Lens.Internal.Setter.$fSettableIdentity]})) -&gt; (Data.Functor.Identity.Identity (AWSLambda.Events.APIGateway.APIGatewayProxyResponse (Data.Aeson.Embedded.Embedded {lq_tmp$x##1592 : Data.Aeson.Types.Internal.Value | $k_##1591[VV##1590:=lq_tmp$x##1592][lq_tmp$x##1587:=Control.Lens.Internal.Setter.$fSettableIdentity]})))</span><span class='hs-varid'>responseBodyEmbedded</span></a> <span class='hs-varop'>?~</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##1664 : Data.Aeson.Types.Internal.Value | lq_tmp$x##1664 == body##a9yW
                                                    &amp;&amp; $k_##1514[VV##1513:=lq_tmp$x##1664][VV##1515:=lq_anf$##7205759403792845451##dduj][liquid_internal_this:=lq_anf$##7205759403792845451##dduj][lq_tmp$x##1524:=lq_tmp$x##1664][lq_tmp$x##1525:=lq_anf$##7205759403792845451##dduj][lq_tmp$x##1543:=lq_tmp$x##1664][lq_tmp$x##1544:=lq_anf$##7205759403792845451##dduj]}</span><span class='hs-varid'>body</span></a> <span class='hs-varop'>&amp;</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##1759:(lq_tmp$x##1751:[((Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString), Data.ByteString.Internal.ByteString)] -&gt; (Data.Functor.Identity.Identity [((Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString), Data.ByteString.Internal.ByteString)])) -&gt; lq_tmp$x##1760:(AWSLambda.Events.APIGateway.APIGatewayProxyResponse {lq_tmp$x##1772 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##1771 : Data.Aeson.Types.Internal.Value | $k_##1768[VV##1767:=lq_tmp$x##1771][VV##1769:=lq_tmp$x##1772][lq_tmp$x##1758:=Data.Functor.Identity.$fFunctorIdentity]}) | $k_##1770[VV##1769:=lq_tmp$x##1772][lq_tmp$x##1758:=Data.Functor.Identity.$fFunctorIdentity]}) -&gt; (Data.Functor.Identity.Identity (AWSLambda.Events.APIGateway.APIGatewayProxyResponse {lq_tmp$x##1772 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##1771 : Data.Aeson.Types.Internal.Value | $k_##1768[VV##1767:=lq_tmp$x##1771][VV##1769:=lq_tmp$x##1772][lq_tmp$x##1758:=Data.Functor.Identity.$fFunctorIdentity]}) | $k_##1770[VV##1769:=lq_tmp$x##1772][lq_tmp$x##1758:=Data.Functor.Identity.$fFunctorIdentity]}))</span><span class='hs-varid'>agprsHeaders</span></a> <span class='hs-varop'>%~</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##1986:{lq_tmp$x##1967 : [{lq_tmp$x##1959 : ({lq_tmp$x##1955 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1954 : Data.ByteString.Internal.ByteString | $k_##1061[VV##1060:=lq_tmp$x##1954][VV##1062:=lq_tmp$x##1955][VV##1069:=lq_tmp$x##1959][VV##1083:=lq_tmp$x##1967]}) | $k_##1063[VV##1062:=lq_tmp$x##1955][VV##1069:=lq_tmp$x##1959][VV##1083:=lq_tmp$x##1967]}, {lq_tmp$x##1956 : Data.ByteString.Internal.ByteString | $k_##1065[VV##1064:=lq_tmp$x##1956][VV##1069:=lq_tmp$x##1959][VV##1083:=lq_tmp$x##1967]})&lt;\lq_tmp$x##1987 VV -&gt; {lq_tmp$x##1958 : Data.ByteString.Internal.ByteString | $k_##1068[VV##1067:=lq_tmp$x##1958][VV##1069:=lq_tmp$x##1959][VV##1083:=lq_tmp$x##1967][lq_tmp$x##1066:=lq_tmp$x##1987][lq_tmp$x##1957:=lq_tmp$x##1987][lq_tmp$x##1983:=lq_tmp$x##1987]}&gt; | $k_##1070[VV##1069:=lq_tmp$x##1959][VV##1083:=lq_tmp$x##1967]}]&lt;\lq_tmp$x##1989 VV -&gt; {lq_tmp$x##1966 : ({lq_tmp$x##1962 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1961 : Data.ByteString.Internal.ByteString | $k_##1073[VV##1072:=lq_tmp$x##1961][VV##1074:=lq_tmp$x##1962][VV##1081:=lq_tmp$x##1966][VV##1083:=lq_tmp$x##1967][lq_tmp$x##1071:=lq_tmp$x##1989][lq_tmp$x##1960:=lq_tmp$x##1989][lq_tmp$x##1985:=lq_tmp$x##1989]}) | $k_##1075[VV##1074:=lq_tmp$x##1962][VV##1081:=lq_tmp$x##1966][VV##1083:=lq_tmp$x##1967][lq_tmp$x##1071:=lq_tmp$x##1989][lq_tmp$x##1960:=lq_tmp$x##1989][lq_tmp$x##1985:=lq_tmp$x##1989]}, {lq_tmp$x##1963 : Data.ByteString.Internal.ByteString | $k_##1077[VV##1076:=lq_tmp$x##1963][VV##1081:=lq_tmp$x##1966][VV##1083:=lq_tmp$x##1967][lq_tmp$x##1071:=lq_tmp$x##1989][lq_tmp$x##1960:=lq_tmp$x##1989][lq_tmp$x##1985:=lq_tmp$x##1989]})&lt;\lq_tmp$x##1988 VV -&gt; {lq_tmp$x##1965 : Data.ByteString.Internal.ByteString | $k_##1080[VV##1079:=lq_tmp$x##1965][VV##1081:=lq_tmp$x##1966][VV##1083:=lq_tmp$x##1967][lq_tmp$x##1071:=lq_tmp$x##1989][lq_tmp$x##1078:=lq_tmp$x##1988][lq_tmp$x##1960:=lq_tmp$x##1989][lq_tmp$x##1964:=lq_tmp$x##1988][lq_tmp$x##1984:=lq_tmp$x##1988][lq_tmp$x##1985:=lq_tmp$x##1989]}&gt; | $k_##1082[VV##1081:=lq_tmp$x##1966][VV##1083:=lq_tmp$x##1967][lq_tmp$x##1071:=lq_tmp$x##1989][lq_tmp$x##1960:=lq_tmp$x##1989][lq_tmp$x##1985:=lq_tmp$x##1989]}&gt; | $k_##1084[VV##1083:=lq_tmp$x##1967]} -&gt; {lq_tmp$x##1981 : [{lq_tmp$x##1973 : ({lq_tmp$x##1969 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1968 : Data.ByteString.Internal.ByteString | $k_##1087[VV##1086:=lq_tmp$x##1968][VV##1088:=lq_tmp$x##1969][VV##1095:=lq_tmp$x##1973][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986]}) | $k_##1089[VV##1088:=lq_tmp$x##1969][VV##1095:=lq_tmp$x##1973][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986]}, {lq_tmp$x##1970 : Data.ByteString.Internal.ByteString | $k_##1091[VV##1090:=lq_tmp$x##1970][VV##1095:=lq_tmp$x##1973][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986]})&lt;\lq_tmp$x##1990 VV -&gt; {lq_tmp$x##1972 : Data.ByteString.Internal.ByteString | $k_##1094[VV##1093:=lq_tmp$x##1972][VV##1095:=lq_tmp$x##1973][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986][lq_tmp$x##1092:=lq_tmp$x##1990][lq_tmp$x##1971:=lq_tmp$x##1990]}&gt; | $k_##1096[VV##1095:=lq_tmp$x##1973][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986]}]&lt;\lq_tmp$x##1992 VV -&gt; {lq_tmp$x##1980 : ({lq_tmp$x##1976 : (Data.CaseInsensitive.Internal.CI {lq_tmp$x##1975 : Data.ByteString.Internal.ByteString | $k_##1099[VV##1098:=lq_tmp$x##1975][VV##1100:=lq_tmp$x##1976][VV##1107:=lq_tmp$x##1980][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986][lq_tmp$x##1097:=lq_tmp$x##1992][lq_tmp$x##1974:=lq_tmp$x##1992]}) | $k_##1101[VV##1100:=lq_tmp$x##1976][VV##1107:=lq_tmp$x##1980][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986][lq_tmp$x##1097:=lq_tmp$x##1992][lq_tmp$x##1974:=lq_tmp$x##1992]}, {lq_tmp$x##1977 : Data.ByteString.Internal.ByteString | $k_##1103[VV##1102:=lq_tmp$x##1977][VV##1107:=lq_tmp$x##1980][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986][lq_tmp$x##1097:=lq_tmp$x##1992][lq_tmp$x##1974:=lq_tmp$x##1992]})&lt;\lq_tmp$x##1991 VV -&gt; {lq_tmp$x##1979 : Data.ByteString.Internal.ByteString | $k_##1106[VV##1105:=lq_tmp$x##1979][VV##1107:=lq_tmp$x##1980][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986][lq_tmp$x##1097:=lq_tmp$x##1992][lq_tmp$x##1104:=lq_tmp$x##1991][lq_tmp$x##1974:=lq_tmp$x##1992][lq_tmp$x##1978:=lq_tmp$x##1991]}&gt; | $k_##1108[VV##1107:=lq_tmp$x##1980][VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986][lq_tmp$x##1097:=lq_tmp$x##1992][lq_tmp$x##1974:=lq_tmp$x##1992]}&gt; | $k_##1110[VV##1109:=lq_tmp$x##1981][headers##a9yT:=lq_tmp$x##1986]}</span><span class='hs-varid'>addCorsHeaders</span></a>
<span class=hs-linenum> 87: </span>
<span class=hs-linenum> 88: </span><span class='hs-definition'>proxyToRequest</span> <span class='hs-keyglyph'>::</span>
<span class=hs-linenum> 89: </span>     <span class='hs-conid'>IORef</span> <span class='hs-conid'>B.ByteString</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>APIGatewayProxyRequest</span> <span class='hs-layout'>(</span><span class='hs-conid'>Embedded</span> <span class='hs-conid'>Value</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Request</span>
<span class=hs-linenum> 90: </span><a class=annot href="#"><span class=annottext>bodyRef##a9yX:{VV##2036 : (GHC.IORef.IORef {VV##2034 : Data.ByteString.Internal.ByteString | $k_##2035}) | $k_##2037} -&gt; apiGWRequest##a9yY:{VV##2043 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {VV##2041 : (Data.Aeson.Embedded.Embedded {VV##2039 : Data.Aeson.Types.Internal.Value | $k_##2040}) | $k_##2042}) | $k_##2044} -&gt; {VV##2046 : Network.Wai.Internal.Request | $k_##2047}</span><span class='hs-definition'>proxyToRequest</span></a> <a class=annot href="#"><span class=annottext>{VV##2036 : (GHC.IORef.IORef {VV##2034 : Data.ByteString.Internal.ByteString | $k_##2035}) | $k_##2037}</span><span class='hs-varid'>bodyRef</span></a> <a class=annot href="#"><span class=annottext>{VV##2043 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {VV##2041 : (Data.Aeson.Embedded.Embedded {VV##2039 : Data.Aeson.Types.Internal.Value | $k_##2040}) | $k_##2042}) | $k_##2044}</span><span class='hs-varid'>apiGWRequest</span></a> <span class='hs-keyglyph'>=</span>
<span class=hs-linenum> 91: </span>  <span class='hs-varid'>defaultRequest</span>
<span class=hs-linenum> 92: </span>    <span class='hs-layout'>{</span> <span class='hs-varid'>requestMethod</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2845 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2844 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2843 : Data.Aeson.Types.Internal.Value | $k_##2040[VV##2039:=lq_tmp$x##2843][VV##2041:=lq_tmp$x##2844][VV##2043:=lq_tmp$x##2845]}) | $k_##2042[VV##2041:=lq_tmp$x##2844][VV##2043:=lq_tmp$x##2845]}) | lq_tmp$x##2845 == apiGWRequest##a9yY
                                                                                                                                                                                                                                                                                                                                        &amp;&amp; $k_##2044[VV##2043:=lq_tmp$x##2845]}</span><span class='hs-varid'>apiGWRequest</span></a> <span class='hs-varop'>^.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2789:(lq_tmp$x##2787:Data.ByteString.Internal.ByteString -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) Data.ByteString.Internal.ByteString Data.ByteString.Internal.ByteString)) -&gt; lq_tmp$x##2790:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2796 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2795 : Data.Aeson.Types.Internal.Value | $k_##2792[VV##2791:=lq_tmp$x##2795][VV##2793:=lq_tmp$x##2796][lq_tmp$x##2788:=lq_anf$##7205759403792845473##dduF]}) | $k_##2794[VV##2793:=lq_tmp$x##2796][lq_tmp$x##2788:=lq_anf$##7205759403792845473##dduF]}) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) Data.ByteString.Internal.ByteString (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2796 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2795 : Data.Aeson.Types.Internal.Value | $k_##2792[VV##2791:=lq_tmp$x##2795][VV##2793:=lq_tmp$x##2796][lq_tmp$x##2788:=lq_anf$##7205759403792845473##dduF]}) | $k_##2794[VV##2793:=lq_tmp$x##2796][lq_tmp$x##2788:=lq_anf$##7205759403792845473##dduF]}))</span><span class='hs-varid'>agprqHttpMethod</span></a>
<span class=hs-linenum> 93: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>httpVersion</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3640 : Network.HTTP.Types.Version.HttpVersion | lq_tmp$x##3640 == Network.HTTP.Types.Version.http11}</span><span class='hs-varid'>http11</span></a>
<span class=hs-linenum> 94: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>rawPathInfo</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3641 : Data.ByteString.Internal.ByteString | lq_tmp$x##3641 == rawPath##a9yZ
                                                        &amp;&amp; $k_##2576[VV##2575:=lq_tmp$x##3641][lq_tmp$x##2564:=apiGWRequest##a9yY][lq_tmp$x##2565:=lq_anf$##7205759403792845464##dduw][lq_tmp$x##2577:=lq_tmp$x##3641]}</span><span class='hs-varid'>rawPath</span></a>
<span class=hs-linenum> 95: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>rawQueryString</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3642 : Data.ByteString.Internal.ByteString | lq_tmp$x##3642 == query##a9z1}</span><span class='hs-varid'>query</span></a>
<span class=hs-linenum> 96: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>requestHeaders</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3069 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##3068 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##3067 : Data.Aeson.Types.Internal.Value | $k_##2040[VV##2039:=lq_tmp$x##3067][VV##2041:=lq_tmp$x##3068][VV##2043:=lq_tmp$x##3069]}) | $k_##2042[VV##2041:=lq_tmp$x##3068][VV##2043:=lq_tmp$x##3069]}) | lq_tmp$x##3069 == apiGWRequest##a9yY
                                                                                                                                                                                                                                                                                                                                        &amp;&amp; $k_##2044[VV##2043:=lq_tmp$x##3069]}</span><span class='hs-varid'>apiGWRequest</span></a> <span class='hs-varop'>^.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2942:(lq_tmp$x##2934:[((Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString), Data.ByteString.Internal.ByteString)] -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) [((Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString), Data.ByteString.Internal.ByteString)] [((Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString), Data.ByteString.Internal.ByteString)])) -&gt; lq_tmp$x##2943:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2955 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2954 : Data.Aeson.Types.Internal.Value | $k_##2951[VV##2950:=lq_tmp$x##2954][VV##2952:=lq_tmp$x##2955][lq_tmp$x##2941:=lq_anf$##7205759403792845476##dduI]}) | $k_##2953[VV##2952:=lq_tmp$x##2955][lq_tmp$x##2941:=lq_anf$##7205759403792845476##dduI]}) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) [((Data.CaseInsensitive.Internal.CI Data.ByteString.Internal.ByteString), Data.ByteString.Internal.ByteString)] (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2955 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2954 : Data.Aeson.Types.Internal.Value | $k_##2951[VV##2950:=lq_tmp$x##2954][VV##2952:=lq_tmp$x##2955][lq_tmp$x##2941:=lq_anf$##7205759403792845476##dduI]}) | $k_##2953[VV##2952:=lq_tmp$x##2955][lq_tmp$x##2941:=lq_anf$##7205759403792845476##dduI]}))</span><span class='hs-varid'>agprqHeaders</span></a>
<span class=hs-linenum> 97: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>pathInfo</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3665 : [{lq_tmp$x##3662 : Data.Text.Internal.Text | $k_##2699[VV##2698:=lq_tmp$x##3662][VV##2703:=lq_tmp$x##3665][VV##2712:=lq_tmp$x##3662][VV##2715:=lq_tmp$x##2707][VV##2717:=lq_tmp$x##3665][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2705:=lq_tmp$x##3662][lq_tmp$x##2708:=lq_tmp$x##3665][xcmp:=lq_anf$##7205759403792845472##dduE]
                                                               &amp;&amp; $k_##2713[VV##2712:=lq_tmp$x##3662][VV##2715:=lq_tmp$x##2707][VV##2717:=lq_tmp$x##3665][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2705:=lq_tmp$x##3662][lq_tmp$x##2708:=lq_tmp$x##3665][lq_tmp$x##2719:=lq_anf$##7205759403792845472##dduE][xcmp:=lq_anf$##7205759403792845472##dduE]}]&lt;\lq_tmp$x##3666 VV -&gt; {lq_tmp$x##3664 : Data.Text.Internal.Text | $k_##2702[VV##2701:=lq_tmp$x##3664][VV##2703:=lq_tmp$x##3665][VV##2712:=lq_tmp$x##2705][VV##2715:=lq_tmp$x##3664][VV##2717:=lq_tmp$x##3665][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2700:=lq_tmp$x##3666][lq_tmp$x##2706:=lq_tmp$x##3666][lq_tmp$x##2707:=lq_tmp$x##3664][lq_tmp$x##2708:=lq_tmp$x##3665][lq_tmp$x##3663:=lq_tmp$x##3666][xcmp:=lq_anf$##7205759403792845472##dduE]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  &amp;&amp; $k_##2716[VV##2712:=lq_tmp$x##2705][VV##2715:=lq_tmp$x##3664][VV##2717:=lq_tmp$x##3665][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2706:=lq_tmp$x##3666][lq_tmp$x##2707:=lq_tmp$x##3664][lq_tmp$x##2708:=lq_tmp$x##3665][lq_tmp$x##2719:=lq_anf$##7205759403792845472##dduE][lq_tmp$x##3663:=lq_tmp$x##3666][xcmp:=lq_anf$##7205759403792845472##dduE]}&gt; | lq_tmp$x##3665 == pathParts##a9z0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     &amp;&amp; len lq_tmp$x##3665 &gt;= 0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     &amp;&amp; $k_##2704[VV##2703:=lq_tmp$x##3665][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2708:=lq_tmp$x##3665][xcmp:=lq_anf$##7205759403792845472##dduE]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     &amp;&amp; $k_##2718[VV##2717:=lq_tmp$x##3665][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2708:=lq_tmp$x##3665][lq_tmp$x##2719:=lq_anf$##7205759403792845472##dduE][xcmp:=lq_anf$##7205759403792845472##dduE]}</span><span class='hs-varid'>pathParts</span></a>
<span class=hs-linenum> 98: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>queryString</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3385 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##3384 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##3383 : Data.Aeson.Types.Internal.Value | $k_##2040[VV##2039:=lq_tmp$x##3383][VV##2041:=lq_tmp$x##3384][VV##2043:=lq_tmp$x##3385]}) | $k_##2042[VV##2041:=lq_tmp$x##3384][VV##2043:=lq_tmp$x##3385]}) | lq_tmp$x##3385 == apiGWRequest##a9yY
                                                                                                                                                                                                                                                                                                                                        &amp;&amp; $k_##2044[VV##2043:=lq_tmp$x##3385]}</span><span class='hs-varid'>apiGWRequest</span></a> <span class='hs-varop'>^.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##3248:(lq_tmp$x##3240:[(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) [(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] [(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))])) -&gt; lq_tmp$x##3249:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##3261 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##3260 : Data.Aeson.Types.Internal.Value | $k_##3257[VV##3256:=lq_tmp$x##3260][VV##3258:=lq_tmp$x##3261][lq_tmp$x##3247:=lq_anf$##7205759403792845479##dduL]}) | $k_##3259[VV##3258:=lq_tmp$x##3261][lq_tmp$x##3247:=lq_anf$##7205759403792845479##dduL]}) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) [(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##3261 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##3260 : Data.Aeson.Types.Internal.Value | $k_##3257[VV##3256:=lq_tmp$x##3260][VV##3258:=lq_tmp$x##3261][lq_tmp$x##3247:=lq_anf$##7205759403792845479##dduL]}) | $k_##3259[VV##3258:=lq_tmp$x##3261][lq_tmp$x##3247:=lq_anf$##7205759403792845479##dduL]}))</span><span class='hs-varid'>agprqQueryStringParameters</span></a>
<span class=hs-linenum> 99: </span>    <span class='hs-layout'>,</span> <span class='hs-conid'>Network.Wai.Internal.requestBody</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3687 : (GHC.Types.IO {lq_tmp$x##3686 : Data.ByteString.Internal.ByteString | $k_##2061[VV##2060:=lq_tmp$x##3686][VV##2062:=lq_tmp$x##3687]}) | lq_tmp$x##3687 == ioBody##a9z2
                                                                                                                                                          &amp;&amp; $k_##2063[VV##2062:=lq_tmp$x##3687]}</span><span class='hs-varid'>ioBody</span></a>
<span class=hs-linenum>100: </span>    <span class='hs-layout'>,</span> <span class='hs-varid'>requestBodyLength</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##3690 : Network.Wai.Internal.RequestBodyLength | lq_tmp$x##3690 == Network.Wai.Internal.ChunkedBody}</span><span class='hs-conid'>ChunkedBody</span></a>
<span class=hs-linenum>101: </span>    <span class='hs-layout'>}</span>
<span class=hs-linenum>102: </span>  <span class='hs-keyword'>where</span>
<span class=hs-linenum>103: </span>    <a class=annot href="#"><span class=annottext>{lq_tmp$x##2577 : Data.ByteString.Internal.ByteString | $k_##2576[VV##2575:=lq_tmp$x##2577][lq_tmp$x##2564:=apiGWRequest##a9yY][lq_tmp$x##2565:=lq_anf$##7205759403792845464##dduw]}</span><span class='hs-varid'>rawPath</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2580 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2579 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2578 : Data.Aeson.Types.Internal.Value | $k_##2040[VV##2039:=lq_tmp$x##2578][VV##2041:=lq_tmp$x##2579][VV##2043:=lq_tmp$x##2580]}) | $k_##2042[VV##2041:=lq_tmp$x##2579][VV##2043:=lq_tmp$x##2580]}) | lq_tmp$x##2580 == apiGWRequest##a9yY
                                                                                                                                                                                                                                                                                                                                        &amp;&amp; $k_##2044[VV##2043:=lq_tmp$x##2580]}</span><span class='hs-varid'>apiGWRequest</span></a> <span class='hs-varop'>^.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2524:(lq_tmp$x##2522:Data.ByteString.Internal.ByteString -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) Data.ByteString.Internal.ByteString Data.ByteString.Internal.ByteString)) -&gt; lq_tmp$x##2525:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2531 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2530 : Data.Aeson.Types.Internal.Value | $k_##2527[VV##2526:=lq_tmp$x##2530][VV##2528:=lq_tmp$x##2531][lq_tmp$x##2523:=lq_anf$##7205759403792845463##dduv]}) | $k_##2529[VV##2528:=lq_tmp$x##2531][lq_tmp$x##2523:=lq_anf$##7205759403792845463##dduv]}) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) Data.ByteString.Internal.ByteString (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2531 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2530 : Data.Aeson.Types.Internal.Value | $k_##2527[VV##2526:=lq_tmp$x##2530][VV##2528:=lq_tmp$x##2531][lq_tmp$x##2523:=lq_anf$##7205759403792845463##dduv]}) | $k_##2529[VV##2528:=lq_tmp$x##2531][lq_tmp$x##2523:=lq_anf$##7205759403792845463##dduv]}))</span><span class='hs-varid'>agprqPath</span></a>
<span class=hs-linenum>104: </span>    <a class=annot href="#"><span class=annottext>{lq_tmp$x##2708 : [{lq_tmp$x##2705 : Data.Text.Internal.Text | $k_##2699[VV##2698:=lq_tmp$x##2705][VV##2703:=lq_tmp$x##2708][VV##2712:=lq_tmp$x##2705][VV##2715:=lq_tmp$x##2707][VV##2717:=lq_tmp$x##2708][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][xcmp:=lq_anf$##7205759403792845472##dduE]
                                                               &amp;&amp; $k_##2713[VV##2712:=lq_tmp$x##2705][VV##2715:=lq_tmp$x##2707][VV##2717:=lq_tmp$x##2708][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2719:=lq_anf$##7205759403792845472##dduE][xcmp:=lq_anf$##7205759403792845472##dduE]}]&lt;\lq_tmp$x##2706 VV -&gt; {lq_tmp$x##2707 : Data.Text.Internal.Text | $k_##2702[VV##2701:=lq_tmp$x##2707][VV##2703:=lq_tmp$x##2708][VV##2712:=lq_tmp$x##2705][VV##2715:=lq_tmp$x##2707][VV##2717:=lq_tmp$x##2708][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2700:=lq_tmp$x##2706][xcmp:=lq_anf$##7205759403792845472##dduE]
                                                                                                                                                                                                                                                                                                                                                                                                                                  &amp;&amp; $k_##2716[VV##2712:=lq_tmp$x##2705][VV##2715:=lq_tmp$x##2707][VV##2717:=lq_tmp$x##2708][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2719:=lq_anf$##7205759403792845472##dduE][xcmp:=lq_anf$##7205759403792845472##dduE]}&gt; | $k_##2704[VV##2703:=lq_tmp$x##2708][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][xcmp:=lq_anf$##7205759403792845472##dduE]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     &amp;&amp; $k_##2718[VV##2717:=lq_tmp$x##2708][lq_tmp$db##13:=lq_anf$##7205759403792845467##dduz][lq_tmp$db##15:=lq_anf$##7205759403792845471##dduD][lq_tmp$x##2719:=lq_anf$##7205759403792845472##dduE][xcmp:=lq_anf$##7205759403792845472##dduE]}</span><span class='hs-varid'>pathParts</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2625:[{lq_tmp$x##2630 : Data.Text.Internal.Text | $k_##2629[VV##2628:=lq_tmp$x##2630][lq_tmp$x##2624:=lq_anf$##7205759403792845466##dduy]}] -&gt; {lq_tmp$x##2620 : [{lq_tmp$x##2630 : Data.Text.Internal.Text | $k_##2629[VV##2628:=lq_tmp$x##2630][lq_tmp$x##2624:=lq_anf$##7205759403792845466##dduy]}] | (not (lq_anf$##7205759403792845466##dduy &gt;= 0) =&gt; len lq_tmp$x##2620 == len lq_tmp$x##2625)
                                                                                                                                                                                                                                                                                                                    &amp;&amp; (lq_anf$##7205759403792845466##dduy &gt;= 0 =&gt; len lq_tmp$x##2620 == (if len lq_tmp$x##2625 &lt; lq_anf$##7205759403792845466##dduy then 0 else len lq_tmp$x##2625 - lq_anf$##7205759403792845466##dduy))}</span><span class='hs-varid'>drop</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2607 : GHC.Types.Int | lq_tmp$x##2607 == (lq_anf$##7205759403792845465##ddux : int)}</span><span class='hs-num'>1</span></a> <span class='hs-varop'>.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2676:Data.Text.Internal.Text -&gt; [Data.Text.Internal.Text]</span><span class='hs-conid'>T.splitOn</span></a> <a class=annot href="#"><span class=annottext>Data.Text.Internal.Text</span><span class='hs-str'>"/"</span></a> <span class='hs-varop'>$</span> <a class=annot href="#"><span class=annottext>Data.Text.Internal.Text</span><span class='hs-conid'>T.decodeUtf8</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2684 : Data.ByteString.Internal.ByteString | lq_tmp$x##2684 == rawPath##a9yZ
                                                        &amp;&amp; $k_##2576[VV##2575:=lq_tmp$x##2684][lq_tmp$x##2564:=apiGWRequest##a9yY][lq_tmp$x##2565:=lq_anf$##7205759403792845464##dduw][lq_tmp$x##2577:=lq_tmp$x##2684]}</span><span class='hs-varid'>rawPath</span></a>
<span class=hs-linenum>105: </span>    <a class=annot href="#"><span class=annottext>Data.ByteString.Internal.ByteString</span><span class='hs-varid'>query</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2474:[(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] -&gt; Data.ByteString.Internal.ByteString</span><span class='hs-varid'>renderQuery</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2478 : GHC.Types.Bool | lq_tmp$x##2478
                                   &amp;&amp; lq_tmp$x##2478 == GHC.Types.True}</span><span class='hs-conid'>True</span></a> <span class='hs-varop'>$</span> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2342 : (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2341 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2340 : Data.Aeson.Types.Internal.Value | $k_##2040[VV##2039:=lq_tmp$x##2340][VV##2041:=lq_tmp$x##2341][VV##2043:=lq_tmp$x##2342]}) | $k_##2042[VV##2041:=lq_tmp$x##2341][VV##2043:=lq_tmp$x##2342]}) | lq_tmp$x##2342 == apiGWRequest##a9yY
                                                                                                                                                                                                                                                                                                                                        &amp;&amp; $k_##2044[VV##2043:=lq_tmp$x##2342]}</span><span class='hs-varid'>apiGWRequest</span></a> <span class='hs-varop'>^.</span> <a class=annot href="#"><span class=annottext>lq_tmp$x##2205:(lq_tmp$x##2197:[(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) [(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] [(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))])) -&gt; lq_tmp$x##2206:(AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2218 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2217 : Data.Aeson.Types.Internal.Value | $k_##2214[VV##2213:=lq_tmp$x##2217][VV##2215:=lq_tmp$x##2218][lq_tmp$x##2204:=lq_anf$##7205759403792845460##ddus]}) | $k_##2216[VV##2215:=lq_tmp$x##2218][lq_tmp$x##2204:=lq_anf$##7205759403792845460##ddus]}) -&gt; (Data.Functor.Const.Const (TYPE 'GHC.Types.LiftedRep) [(Data.ByteString.Internal.ByteString, (GHC.Maybe.Maybe Data.ByteString.Internal.ByteString))] (AWSLambda.Events.APIGateway.APIGatewayProxyRequest {lq_tmp$x##2218 : (Data.Aeson.Embedded.Embedded {lq_tmp$x##2217 : Data.Aeson.Types.Internal.Value | $k_##2214[VV##2213:=lq_tmp$x##2217][VV##2215:=lq_tmp$x##2218][lq_tmp$x##2204:=lq_anf$##7205759403792845460##ddus]}) | $k_##2216[VV##2215:=lq_tmp$x##2218][lq_tmp$x##2204:=lq_anf$##7205759403792845460##ddus]}))</span><span class='hs-varid'>agprqQueryStringParameters</span></a>
<span class=hs-linenum>106: </span>    <a class=annot href="#"><span class=annottext>{VV##2062 : (GHC.Types.IO {VV##2060 : Data.ByteString.Internal.ByteString | $k_##2061}) | $k_##2063}</span><span class='hs-varid'>ioBody</span></a> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<span class=hs-linenum>107: </span>      <a class=annot href="#"><span class=annottext>{lq_tmp$x##2056 : Data.ByteString.Internal.ByteString | $k_##2055[VV##2054:=lq_tmp$x##2056][lq_tmp$x##2053:=bodyRef##a9yX]}</span><span class='hs-varid'>b</span></a> <span class='hs-keyglyph'>&lt;-</span> <a class=annot href="#"><span class=annottext>(GHC.Types.IO {lq_tmp$x##2056 : Data.ByteString.Internal.ByteString | $k_##2055[VV##2054:=lq_tmp$x##2056][lq_tmp$x##2053:=bodyRef##a9yX]})</span><span class='hs-varid'>readIORef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2058 : (GHC.IORef.IORef {lq_tmp$x##2057 : Data.ByteString.Internal.ByteString | $k_##2035[VV##2034:=lq_tmp$x##2057][VV##2036:=lq_tmp$x##2058]}) | lq_tmp$x##2058 == bodyRef##a9yX
                                                                                                                                                             &amp;&amp; $k_##2037[VV##2036:=lq_tmp$x##2058]}</span><span class='hs-varid'>bodyRef</span></a>
<span class=hs-linenum>108: </span>      <a class=annot href="#"><span class=annottext>(GHC.Types.IO ())</span><span class='hs-varid'>writeIORef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2077 : (GHC.IORef.IORef {lq_tmp$x##2076 : Data.ByteString.Internal.ByteString | $k_##2035[VV##2034:=lq_tmp$x##2076][VV##2036:=lq_tmp$x##2077]}) | lq_tmp$x##2077 == bodyRef##a9yX
                                                                                                                                                             &amp;&amp; $k_##2037[VV##2036:=lq_tmp$x##2077]}</span><span class='hs-varid'>bodyRef</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2078 : Data.ByteString.Internal.ByteString | lq_tmp$x##2078 == Data.ByteString.empty}</span><span class='hs-conid'>B.empty</span></a>
<span class=hs-linenum>109: </span>      <a class=annot href="#"><span class=annottext>(GHC.Types.IO {lq_tmp$x##2094 : Data.ByteString.Internal.ByteString | $k_##2093[VV##2092:=lq_tmp$x##2094][lq_tmp$x##12:=b##a9z3]})</span><span class='hs-varid'>pure</span></a> <a class=annot href="#"><span class=annottext>{lq_tmp$x##2095 : Data.ByteString.Internal.ByteString | lq_tmp$x##2095 == b##a9z3
                                                        &amp;&amp; $k_##2055[VV##2054:=lq_tmp$x##2095][lq_tmp$x##2053:=bodyRef##a9yX][lq_tmp$x##2056:=lq_tmp$x##2095]}</span><span class='hs-varid'>b</span></a></pre>
</body>
</html>